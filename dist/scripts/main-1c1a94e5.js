"use strict";function ShotCtrl(t,e,n,o,i,r,a,s,l,c,u,d){function h(){var t=document.querySelector(".intro-splash");t.style.opacity=0,o(function(){t.nextElementSibling.style.opacity=1},1e3)}function f(){var t=new Clipboard(".share-link",{text:function(){return window.location.href+"?index=1"}}),e=document.createElement("div");e.className="tooltip",t.on("success",function(t){var n=t.trigger;e.innerHTML="Share Link copied to Clipboard",n.appendChild(e),setTimeout(function(){e.remove()},3e3),t.clearSelection()}),t.on("error",function(t){var n=t.trigger;e.innerHTML="Share Link could not be Copied",n.appendChild(e),setTimeout(function(){e.remove()},3e3),t.clearSelection()})}function p(){"1"===v("index")&&(t.menuIsOn=!0,angular.element(document.body).addClass("noscroll"))}function v(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),o=n.exec(e);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null}var m=this;this.id=a.current,this.next=a.getNext(),this.previous=a.getPrevious(),this.videoUrl=a.getVideoUrl(),this.shots=[],this.volumes=[],this.currentVolume=null,this.thumbsForTag={},u.pageview(window.location.href,document.title+" - Shot "+this.id),t.menuIsOn=!1,t.showMenuTab="shots",angular.element(document.body).removeClass("noscroll");var g=3e4;this.played=!1,this.play=function(){m.played=!0,m.backgroundOpacity=0,m.playing=!0,l.play(function(){m.stop(),d.autoScroll()})},this.stop=function(){m.playing=!1,l.resumeLoop(),m.backgroundOpacity=1,t.$apply()};var y=!0;this.id&&a.getShot(this.id).then(function(e){window.location.search.indexOf("installation")>=0&&o(function(){m.played||m.play()},g);var n=[{type:"introduction",shot:m.id,title:e[0].title,authors:e[0].author.name,nav:"introduction",attributes:{loop:e[0].timecodes},onEnter:function(){t.inView=!0,m.ready||o(function(){m.ready=!0,h()},3e3),t.$apply()},onExit:function(){t.inView=!1,m.stop()}}],r=[{shot:m.id,type:"outro",next:m.next,onEnter:function(){window.location.search.indexOf("installation")>=0&&o(function(){y&&(c.scrollToSlide(m.slides[0]),i.go("shot",{shot:m.next||1}))},g)},onExit:function(){y=!1}}],a=n.concat(s.parse(e),r);m.annotations=e,m.slides=a,_.each(a,function(e){e.isNav=t.isNavSlide(e),e.isHeader=t.isHeaderSlide(e),o(function(){e.volume=m.currentVolume},300)})}),a.getThumbnails(0).then(function(e){t.thumbs=m.thumbs=e;var n=_.findIndex(e,function(t){return parseInt(t.slug,10)===m.id}),i=275,r=i*Math.floor(n/2);o(function(){document.querySelector(".nav-menu-shots").scrollTop=r},300)}),a.getVolumes().then(function(e){t.volumes=e,_.each(e,function(e){e.slug===r.volume&&(t.currentVolume=m.currentVolume=e)})}),a.getVolumeShots().then(function(e){t.shots=e}),a.getTags(0).then(function(t){m.tags=_.map(_.sortBy(t,function(t){return-t.post_count}).slice(0,30),function(t){return t.title=t.title.replace(/\s/g,"&nbsp;"),t})}),t.isHeaderSlide=function(t){var e=["introduction","text","column","outro","author","photo","video","streetview","bg-video"];return _.contains(e,t.type)},t.isNavSlide=function(t){var e=["introduction","text","column","author","photo","video","streetview","main-title"];return _.contains(e,t.type)},t.scrollToSlide=function(t){c.scrollToSlide(t)},t.thumbnailForShot=function(t){return"/wp/wp-content/uploads/Shots_400px/"+t.slug+".png"},t.annotationsForShot=function(t){a.getShot(Number(t.slug)).then(function(){})},t.toggleMenu=function(){t.menuIsOn?(l.resumeLoop(),angular.element(document.body).removeClass("noscroll")):(l.pause(),angular.element(document.body).addClass("noscroll")),t.menuIsOn=!t.menuIsOn},t.toggleGlobalMenu=function(){t.globalIsOn?(l.resumeLoop(),angular.element(document.body).removeClass("noscroll")):(l.pause(),angular.element(document.body).addClass("noscroll")),t.globalIsOn=!t.globalIsOn},t.filterShots=function(e){e?m.thumbsForTag[e.id]?t.thumbs=m.thumbsForTag[e.id]:a.getAnnotationsForTag(e,0).then(function(n){var o={};_.each(n,function(t){t.categories.length&&(o[t.categories[0].id]=t.categories[0])}),t.thumbs=m.thumbsForTag[e.id]=_.toArray(o)}):t.thumbs=m.thumbs},t.getArticleNumber=function(t){return ShotFilter(t)},t.closeMenuIfCurrent=function(e){e.index===r.shot&&(t.menuIsOn=!1,angular.element(document.body).removeClass("noscroll"))},f(),p()}function ShotService(t,e,n,o,i,r){var a=this,s=parseInt(o.shot,10),l=parseInt(o.volume,10);document.title=document.title+" - Vol "+romanize(l),this.current=isNaN(s)?0:s,this.currentVolumeIndex=isNaN(l)?0:l,this.getVideoUrl=function(){var t=n("shot")(this.currentVolumeIndex)+"-"+n("shot")(this.current),e="https://s3.amazonaws.com/world-records-journal/"+t+".mp4";return e};var c=100;this.getNext=function(){var t=this.current+1;return c>=t?n("shot")(t):null},this.getPrevious=function(){var t=this.current-1;return t>=0?n("shot")(t):null},this.cache=[];var u="/wp/?json=get_post&post_type=mm_annotation&slug=";this.getShot=function(t){var o=i.defer(),s="number"!=typeof t||isNaN(t)?this.current:t;if(s=n("shot")(this.currentVolumeIndex)+"-"+n("shot")(s),this.cache[s])return o.resolve(this.cache[s]),o.promise;var l=u+s;return e({method:"GET",url:l}).success(function(t){a.cache[s]=r.parse(t.post),o.resolve(a.cache[s])}).error(function(){o.reject("Error fetching shot "+s)}),o.promise};var d={};this.getVolumes=function(){var t=i.defer();return e({method:"GET",url:"/wp/?json=get_category_index"}).success(function(e){if("ok"===e.status){var n=[];e.categories.forEach(function(t){if(2===t.slug.length){if(t.description){var e=t.description.split("[column]");t.description="<p>"+e.join("</p><p>")+"</p>"}n.push(t),d[parseInt(t.slug,10)]=t.post_count}}),c=d[l],t.resolve(n)}else t.reject("Error fetching volumes")}).error(function(){t.reject("Error fetching volumes")}),t.promise},this.getVolumeShots=function(){var t=i.defer();return e({method:"GET",url:"/wp/?json=get_category_posts&category_slug="+o.volume}).success(function(e){"ok"===e.status?(e.posts.forEach(function(t){var e=t.slug.split("-");e.length>1&&(t.volume=e[0],t.index=e[1],t.annotations=r.parse(t))}),t.resolve(e.posts)):t.reject("Error fetching volumes")}).error(function(){t.reject("Error fetching volumes")}),t.promise};var h="/wp/?json=get_category_index";this.getThumbnails=function(t){var n=i.defer();return t=t||0,e({method:"GET",url:h+"&page="+t}).success(function(t){"ok"===t.status?n.resolve(t.categories):n.reject("Error fetching shots")}).error(function(){n.reject("Error fetching shots")}),n.promise};var f="/wp/?json=get_tag_posts";this.getAnnotationsForTag=function(t,n){var o=i.defer();return n=n||0,e({method:"GET",url:f+"&id="+t.id+"&page="+n}).success(function(t){"ok"===t.status?o.resolve(t.posts):o.reject("Error fetching shots")}).error(function(){o.reject("Error fetching shots")}),o.promise};var p="/wp/?json=get_tag_index";this.getTags=function(t){var n=i.defer();return t=t||0,e({method:"GET",url:p+"&page="+t}).success(function(t){"ok"===t.status?n.resolve(t.tags):n.reject("Error fetching shots")}).error(function(){n.reject("Error fetching shots")}),n.promise},t.$on("$stateChangeStart",function(t,e,n){var o=parseInt(n.volume,10);isNaN(o)||(a.currentVolumeIndex=o,c=d[o]);var i=parseInt(n.shot,10);!isNaN(i)&&i>=0&&c>=i&&(a.current=i)})}function romanize(t){if(!+t)return 0/0;for(var e=String(+t).split(""),n=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],o="",i=3;i--;)o=(n[+e.pop()+10*i]||"")+o;return Array(+e.join("")+1).join("M")+o}function AnnotationsService(t){this.parse=function(e){return[new t(e)]}}function AnnotationParserService(t,e){this.parse=function(n){var o=[];return angular.forEach(n,function(n){var i=n.content,r=/({\d+})/g,a='<a class="footnote">$1</a>';i=i.replace(r,a);var s=i.split(/\[slide\s*/gi);return s.length<2?(o.push({type:"text",content:i,attributes:{text:void 0},annotation:n}),!1):(s=s.slice(1),angular.forEach(s,function(r){var a=r.split("]");if(a.length<2)throw new Error('Slide tag "'+a[0]+'" did not have closing bracket: '+i);var s=a[0],l=a[1],c=/(\w+)(?=$|\s|=)/i,u=c.exec(s);if(null===u)throw new Error("Could not determine type of slide tag: "+r);u=u[1].toLowerCase();var d={text:1,column:1,background:1,photo:1,highlight:1,audio:1,video:1,streetview:1};if(!d[u])throw new Error("Type not allowed: "+u);var h={};s=s.replace(/&#8220;|&#8221;|&#8243;/g,'"'),s=s.replace(/&#8216;|&#8217;|&#8242;/g,"'"),s=s.replace(/&#8211;|&#8212;/g,"-");for(var f,p,v,m=/(\w+)=("[^"]*"|'[^']*'|\w+)/g,g=s;null!==(f=m.exec(s));)p=f[1].toLowerCase(),v=f[2],('"'===v.charAt(0)||"'"===v.charAt(0))&&(v=v.slice(1,-1)),"video"===p&&(v=v.split(",")),h[p]=v,g=g.replace(f[0],"");angular.forEach(g.split(/\s+/g),function(t){t&&(h[t]=void 0)}),h.caption&&(h.caption=h.caption.replace(/\<br\s*\/*\>/gi,"")),("photo"===u||"background"===u||"video"===u)&&(l=l.replace(/\<br\s*\/*\>/gi,""),"video"===u&&(l=l.replace(/width\=\"[0-9a-z]+\"/gi,""),l=l.replace(/height\=\"[0-9a-z]+\"/gi,"")));var y={type:u,content:t.trustAsHtml(l),attributes:h,annotation:n},b={photo:"photos",video:"video",streetview:"Then & Now"};y.nav=h.title?h.title.replace(/<[^>]+>/g,"").replace(/\\/,String.fromCharCode(160,32,92,32,160)):b[u],"video"===u&&(y.onEnter=function(){e.$broadcast("videoEnter",y)},y.onExit=function(){e.$broadcast("videoExit",y)}),o.push(y)}),void 0)}),o}}function Annotation(){function t(t){function e(t){var e=n&&n[t]&&n[t][0];return e||""}if(t){this.slug=t.categories[0].slug,this.title=t.title,this.content=t.content||"",this.author=t.custom_fields.authors?{name:t.custom_fields.authors[0],description:t.custom_fields.description[0],image:"/wp/wp-content/uploads/authors/"+t.author.nickname+".jpg"}:{name:t.author&&t.author.name,description:t.author.description,image:"/wp/wp-content/uploads/authors/"+t.author.nickname+".jpg"},t.custom_fields.pdf_download&&(this.pdf=t.custom_fields.pdf_download[0]);var n=t.custom_fields,o=e("mm_annotation_streetview"),i=e("mm_annotation_start_timecode"),r=e("mm_annotation_end_timecode"),a=e("mm_annotation_x"),s=e("mm_annotation_y");o&&(this.streetView=o),(i||r)&&(this.timecodes={start:i&&parseFloat(i)||0,end:r&&parseFloat(r)||0}),(a||s)&&(this.highlight={x:a&&parseFloat(a)||0,y:s&&parseFloat(s)||0});var l={};t.tags&&t.tags.length&&angular.forEach(t.tags,function(t){l[t.title]=1}),this.tags=l}}return t}function StreetViewService(){var t="//maps.googleapis.com/maps/api/streetview?",e="AIzaSyCru1EQFOIRQgaalFfc7TtJH0S6TosODQ4",n=e?"https:":"";this.parseStreetViewUrl=function(t,e){var n={size:e||"200x200",sensor:"false"},o=/www\.google\.com\/maps.*\/@([^\/]+)\//,i=o.exec(t);return i?(i=i[1].split(","),n.location=i[0]+","+i[1],n.fov=parseInt(i[3].replace("y",""),10),n.heading=parseFloat(i[4].replace("h","")),n.pitch=parseFloat(i[5].replace("t",""))-90,n):!1},this.buildStreetViewAPIUrl=function(o){var i=[];for(var r in o)i.push(r+"="+o[r]);return e&&i.push("key="+e),n+t+i.join("&")}}function VideoService(t){var e=document.createElement("canvas"),n=e.getContext("2d"),o=[],i=[];this.screenshotTaken=function(e){e=e||0;var n=t.current,i=o[n];return i&&i[e]};var r=function(t){var o=t.videoHeight,i=t.videoWidth;return e.height=o,e.width=i,n.drawImage(t,0,0),n.getImageData(0,0,i,o)};this.screenshot=function(e,n){var a=t.current,s=!o[a],l=o[a]||{};l[n]=r(e),o[a]=l;var c=i[a],u=c&&c[n];if(u&&u.length){for(;u.length;)u.pop()(l[n]);i[a][n]=null}s&&c&&_.forIn(c,function(t){_.forEach(t,function(t){t(l[n])})})},this.requestScreenshot=function(e,n){var r=t.current,a=o[r]||{};a[e]?n(a[e]):(i[r]=i[r]||{},i[r][e]=i[r][e]||[],i[r][e].push(n),a[0]?n(a[0]):_.forIn(a,function(t){return n(t),!1}))}}function ShotVideoService(){var t=this,e={start:0,end:0},n=e,o=!1,i=null;this.registerShotVideo=function(o){t.video&&t.video.removeEventListener("timeupdate",t.onTimeUpdate,!1),t.video=o,n=e,t.video.addEventListener("timeupdate",t.onTimeUpdate,!1)},this.play=function(e){t.video.readyState<2||(o=!0,i=e,t.video.currentTime=0,t.video.playbackRate=1,t.video.muted=!1,t.video.loop=!1,e&&t.video.addEventListener("ended",i,!1))},this.resumeLoop=function(){t.video.readyState<2||(o=!1,t.video.playbackRate=.3,t.video.muted=!0,t.video.loop=!0,t.video.removeEventListener("ended",i,!1),i=null,t.video.currentTime=0,t.video.play())},this.pause=function(){t.video.playbackRate=0},this.setLoopBounds=function(t){n=t||e},this.onTimeUpdate=function(){var e;if(!o&&(n.start||n.end)){e=t.video;var i=e.currentTime;n.start&&i<n.start?e.currentTime=n.start:n.end&&i>n.end&&(e.currentTime=n.start||0)}}}function ScrollService(t,e){var n={fadeInFromBottom:[{key:-1,opacity:0,top:1},{key:-.5,opacity:0,top:.5,ease:"out"},{key:0,opacity:1,top:0},{key:1,opacity:0,top:0}],slideInFromBottom:[{key:0,top:1,ease:"out"},{key:.8,top:0},{key:1.2,top:0,ease:"in"},{key:2,top:-1}],highlightStart:[{key:-.5,top:0,left:1,metaOpacity:0}],construct:function(t,e){return t=_.clone(t,!0),_.forEach(e,function(e){var n=_.find(t,{key:e.key});if(n)n=_.merge(n,e);else{var o=_.sortedIndex(t,e,"key");t.splice(o,0,e)}}),t}};this.init=function(t){this.$el=t.el,this.annotationInfo=[],this.height=window.innerHeight,this.navHeight=80,this.slides=[],this.$slides=[],this.timecodeMap={},this.currentLoop=0,this.headers=document.getElementsByClassName("top-nav-author"),this.navButtons=document.getElementsByClassName("side-nav-circle"),this.$background=angular.element(document.getElementsByClassName("shot-background")[0]),this.$play=angular.element(document.getElementsByClassName("shot-video-play")[0]),window.addEventListener("resize",angular.bind(this,this.sizeAndPosition)),this.boundOnscroll=angular.bind(this,this.onscroll),this.nextDraw()},this.keyFrames={introduction:[{key:0,backgroundOpacity:1,opacity:1,playOpacity:1},{key:.8,opacity:0,playOpacity:1},{key:.9,opacity:0,playOpacity:0},{key:1,backgroundOpacity:0,opacity:0,playOpacity:0}],outro:[{key:-.3,backgroundOpacity:1,opacity:0},{key:0,backgroundOpacity:0,opacity:0},{key:.5,opacity:1},{key:10,opacity:1}],shotvideo:[{key:0,backgroundOpacity:1},{key:.2,backgroundOpacity:0},{key:.8,backgroundOpacity:0},{key:1,backgroundOpacity:1}],author:[{key:0,opacity:0},{key:.5,opacity:1,left:0,top:0,scale:1},{key:1,left:0,top:0,scale:1,ease:"in-out"},{key:1.5,top:-.3,left:-.41,scale:.45}],background:[{key:-.5,top:1,ease:"out",metaOpacity:1},{key:.2,top:0,metaOpacity:1},{key:.9,metaOpacity:1},{key:1,top:0,opacity:1,metaOpacity:0},{key:1.5,opacity:0}],"bg-video":[{key:-.5,top:1},{key:0,top:0},{key:2.5,top:0},{key:3,top:-1}],"main-title":{"slide-inner":{frames:[{key:-.9,top:1,ease:"out"},{key:-.3,top:0},{key:1.5,top:0},{key:2,top:-1}]},"slide-main-title-description":{frames:[{key:-.3,top:1,ease:"out"},{key:.3,top:0}]},"slide-main-title-subtitle":{frames:[{key:.3,top:1,ease:"out"},{key:.9,top:0}]},"slide-main-title-play":{frames:[{key:.3,top:1,ease:"out"},{key:.9,top:0}]}},text:n.fadeInFromBottom,column:[{key:-1,opacity:0,top:1},{key:-.5,opacity:0,top:.5,ease:"out"},{key:0,opacity:1,top:0},{key:1,opacity:1,top:0},{key:2,opacity:0,top:0}],highlight:n.highlightStart,photo:n.slideInFromBottom,streetview:n.slideInFromBottom,video:[{key:0,top:1,ease:"out"},{key:.5,top:0},{key:1,top:0},{key:1.5,top:-1}]},this.easing={linear:function(t){return t},"in":function(t){return t*t},out:function(t){return t*(t-2)*-1},"in-out":function(t){return t=2*t,1>t?t*t*.5:-.5*(--t*(t-2)-1)},"cube-in":function(t){return t*t*t},"cube-out":function(t){return(t-=1)*t*t+1}},this.setSlides=function(t){this.slides=t;var e=this;window.setTimeout(function(){e.$slides=e.$el[0].getElementsByClassName("slide"),e.sizeAndPosition()},100)},this.scrollToSlide=function(t){window.scrollTo(0,t.padded_top)},this.sizeAndPosition=function(){var t=window.innerHeight;this.height=t,this.halfHeight=this.height/2,this.doubleHeight=2*this.height;var n,o,i=0,r=0,a=window.innerWidth,s=document.querySelector(".shot-video-directive"),l=s?s.clientWidth:a,c=l/a,u=(a-l)/2/a;0>u&&(u=0),!this.slides||this.slides.length<1||this.$slides.length<1||(angular.forEach(this.slides,function(a,s){var l=this.$slides[s];if(a.top=l.offsetTop,a.height=l.offsetHeight,a.bottom=a.top+a.height,a.padded_top="main-title"!==a.type?Math.round(a.top+(a.height-this.height)/2):a.bottom-this.height,a.el=l,a.$el=angular.element(l),a.$inner=a.$el.find("div").eq(0),a.$container=angular.element(a.$inner[0].children[0]),a.$meta=angular.element(a.el.getElementsByClassName("meta-text")[0]),a.index=s,a.keyFrames=_.clone(this.keyFrames[a.type],!0)||[],_.isArray(a.keyFrames)||_.each(a.keyFrames,function(t,e){t.$el=angular.element(a.$el[0].getElementsByClassName(e))}),"highlight"===a.type){var d=a.annotation.highlight.x/100;d=u+d*c;var h=a.annotation.highlight.y/100;a.keyFrames=a.keyFrames.concat([{key:0,top:h,left:d,metaOpacity:0},{key:.2,top:h,left:d,metaOpacity:1},{key:.7,top:h,left:d,metaOpacity:1,opacity:1},{key:1,top:h,left:d,metaOpacity:0,opacity:0}])}if("column"===a.type){var f=a.$el[0].offsetHeight,p=Number(window.getComputedStyle(a.$container[0]).getPropertyValue("width").replace("px","")),v=a.$el[0].querySelectorAll("img");v.forEach(function(t){if(t.width>0){p/t.width}else t.parentNode.removeChild(t);angular.element(t).css({width:"100%",height:"auto"})}),window.setTimeout(function(){f=a.$el[0].offsetHeight;var e=a.keyFrames.length-1,n=a.keyFrames[e-1],o=a.keyFrames[e];o.key=f/t,o.opacity=1,a.keyFrames[e-1]=n,a.keyFrames[e]=o,a.$el.css("height",f+"px")},2e3)}if((a.isHeader||"author"===a.type)&&(a.headerEl=this.headers[i],i++),a.isNav&&(a.navButton=this.navButtons[r],r++),n&&a.annotation!==n.annotation&&(n.keyFrames=n.keyFrames.concat([{key:s-n.index+.5,opacity:1,top:-.3,left:-.41,scale:.45},{key:s-n.index+1,opacity:0,top:-.3,left:-.41,scale:.45}]),n=null),"author"===a.type&&(n=a),o&&a.annotation!==o.annotation&&(o.keyFrames=o.keyFrames.concat([{key:s-o.index-1,opacity:1,top:0,metaOpacity:0},{key:s-o.index-.5,opacity:0,top:-1,metaOpacity:0}]),o=null),"background"===a.type&&(o=a),a.attributes&&a.attributes.loop){if("string"==typeof a.attributes.loop){var m=a.attributes.loop.split(",");if(m.length>1){var g={start:Number(m[0]),end:Number(m[1])};a.attributes.loop=g}}this.timecodeMap[a.index]=a.attributes.loop}var y=l.querySelectorAll(".footnote");y&&y.forEach(function(t){var n=t.innerHTML.replace(/{|}/g,""),o="#/volume/"+e.volume+"/"+e.shot;"Endnotes"===a.nav?(t.id="source"+n,t.href=o+"#ref"+n,[].filter.call(document.getElementsByTagName("p"),function(t){return 0==t.childElementCount&&""==t.textContent.trim()}).forEach(function(t){t.parentNode.removeChild(t)})):(t.id="ref"+n,t.href=o+"#source"+n)})},this),this.lastY=void 0,this.reflow())},this.currentSlide={},this.currentAnnotation={},this.nextDraw=function(){this.animationFrame=window.requestAnimationFrame(this.boundOnscroll)},this.reflow=function(){window.cancelAnimationFrame(this.animationFrame),this.onscroll()},this.onscroll=function(){var e=window.scrollY;if(!this.slides||!this.slides.length||e===this.lastY||0>e)return this.nextDraw();this.lastY=e;var n=this.height;return angular.forEach(this.slides,function(o,i){var r=(e-o.top)/n,a=o.keyFrames;if(a){var s=_.isArray(a)?a:a["slide-inner"].frames,l=s.length,c=_.sortedIndex(s,{key:r},"key"),u=0===c&&r<s[0].key;if(u)return o.hidden||(o.$inner.css({visibility:"hidden"}),o.hidden=!0),void 0;var d=c===l&&r>s[l-1].key;if(d)return o.hidden||(o.$inner.css({visibility:"hidden"}),o.hidden=!0),void 0;if(o.hidden=!1,e>=o.top&&e<=o.bottom){if(this.currentSlide!==o)if(this.currentSlide.onExit&&this.currentSlide.onExit(),o.onEnter&&o.onEnter(),this.currentSlide=o,o.attributes&&o.attributes.loop)t.setLoopBounds(o.attributes.loop),this.currentLoop=o.index;else if(o.index<this.currentLoop)for(i=o.index;i>=0;i--)if(this.timecodeMap[i])return t.setLoopBounds(this.timecodeMap[i]),!1;var h,f=o.headerEl,p=o.navButton;if(f||(h=this.slides.slice(0,i),_.forEachRight(h,function(t){return t.headerEl?(f=t.headerEl,!1):void 0})),p||(h=this.slides.slice(0,i),_.forEachRight(h,function(t){return t.navButton?(p=t.navButton,!1):void 0})),f&&(!this.lastHeader||this.lastHeader!==f)){var v;angular.forEach(this.headers,function(t){var e=angular.element(t);t===f?(v=e,e.removeClass("up").removeClass("down")):v?e.addClass("down").removeClass("up"):e.addClass("up").removeClass("down")},this),this.lastHeader=f}!p||this.lastNav&&this.lastNav===p||(this.lastNav&&angular.element(this.lastNav).removeClass("highlighted"),angular.element(p).addClass("highlighted"),this.lastNav=p)}var m,g,y,b={};y=_.isArray(a)?[{$el:o.$inner,frames:a}]:_.toArray(a),_.each(y,function(t){a=t.frames,_.forEach(a,function(t){if(r===t.key)return b=_.omit(t,["key","event"]),!1;if(!(r>t.key)){var e=(r-m)/(t.key-m),n=this.easing[g](e),o={};return _.forEach(t,function(t,e){"key"!==e&&"event"!==e&&void 0!==b[e]&&(o[e]=b[e]+(t-b[e])*n)}),b=o,!1}b=_.omit(t,["key","event"]),m=t.key,g=t.ease||"linear"},this);var e=0,n=0,i="";_.forEach(b,function(t,o){"top"===o?n=(t*this.height).toFixed(1)+"px":"left"===o?e=(100*t).toFixed(1)+"%":"scale"===o?i=" scale("+t.toFixed(2)+")":("opacity"===o||"backgroundOpacity"===o)&&(b[o]=t.toFixed(2))},this),t.$el[0]!==o.$inner[0]||_.has(b,"opacity")||(b.opacity=1);var s="translate3d("+e+", "+n+", 0)"+i;if(t.$el.css({"-webkit-transform":s,transform:s,display:"block",visibility:"visible",opacity:b.opacity}),"column"===o.type){if(!l)var l=o.$container[0],c=parseInt(window.getComputedStyle(l).getPropertyValue("padding-bottom"),10),u=o.$el[0].getElementsByClassName("column-nav-bg")[0];u.style.opacity=l.getBoundingClientRect().top<0&&l.getBoundingClientRect().top+t.$el[0].clientHeight>c?b.opacity:0}void 0!==b.metaOpacity&&o.$meta.css({opacity:b.metaOpacity}),void 0!==b.backgroundOpacity&&this.$background.css({opacity:b.backgroundOpacity}),void 0!==b.playOpacity&&this.$play.css({opacity:b.playOpacity})},this)}},this),this.nextDraw()}}function AutoScrollerService(){function t(){var o=window.pageYOffset;if(null!==e&&o!==e&&o!==e-n)return e=null,void 0;var i=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight);return o+window.innerHeight>=i?(e=null,void 0):(e=o+n,window.scrollTo(0,e),window.requestAnimationFrame(t),void 0)}var e=null,n=5;this.autoScroll=function(){window.scrollTo(0,window.innerHeight/2),t()}}function AnalyticsService(t){this.pageview=function(e,n){t.ga&&t.ga("send","pageview",{page:e,title:n})}}function ShotFilter(t){return("00"+t).slice(-2)}function MimeTypeFilter(t){return _.last(t.split("."))}function WebMFilter(t){return t.replace(".mp4",".webmhd.webm")}function SlideManager(t,e){return{restrict:"E",template:['<slide ng-class="{\'slides-loading\': loading}" ng-repeat="slide in slides" data="slide"></slide>'].join(""),scope:{slides:"=?"},link:function(n,o){e.init({el:o}),n.$watch("slides",function(){n.loading=!0,n.$evalAsync(function(){e.setSlides(n.slides),t(function(){n.loading=!1,n.scope=n.$parent},100)})})}}}function Slide(){return{restrict:"E",templateUrl:"templates/slide.html",link:function(){}}}function BackgroundCoverDirective(t,e){return{restrict:"C",priority:-1,link:function(n,o,i){function r(){var t="IMG"===o[0].tagName?o[0]:o.find("IMG")[0];if(t&&t.height&&t.width){var e=window.innerWidth/window.innerHeight;return t.width/t.height>e&&i.$addClass("fill-height-directive"),"IMG"===o[0].tagName?o.off("load",r):o.find("IMG").off("load",r),!0}return!1}r()||("IMG"===o[0].tagName?o.on("load",r):i.ngBindHtml&&n.$watch("ngBindHtml",function(){t(function(){r()||o.find("IMG").on("load",r)},50)})),angular.element(e).on("resize",_.debounce(r,150))}}}function shotVideoDirective(t,e){return{restrict:"C",link:function(n,o){function i(){var e=parseFloat(r.currentTime.toFixed(1));if(a[e]){t.screenshot(r,e),delete a[e];var n=!1;_.forIn(a,function(t){return t?(n=!0,!1):void 0}),n||(r.removeEventListener("timeupdate",i),a=!1)}}var r=o[0];e.registerShotVideo(r),r.playbackRate=.3,t.screenshots=t.screenshots||{};var a;n.$watch("shot.annotations",function(){a=!1,_.forEach(n.shot.annotations,function(e){var n=e.timecodes,o=n&&void 0!==n.start;o&&!t.screenshotTaken(r,n.start)&&(a=a||{},a[n.start]=1)}),a&&r.addEventListener("timeupdate",i)})}}}function StreetView(t){return{restrict:"E",templateUrl:"templates/streetview.html",scope:{url:"@",caption:"@",title:"@",startFrame:"@"},link:function(e){var n=window.innerWidth+"x"+window.innerHeight,o=t.parseStreetViewUrl(e.url,n);e.streetViewImageUrl=t.buildStreetViewAPIUrl(o),e.oneUp=!0,e.goToStreetView=function(){}}}}function VideoFrame(t){return{restrict:"A",scope:{target:"@"},link:function(e,n){var o=e.target||0,i=n[0],r=i.getContext("2d"),a=function(t){i.height=t.height,i.width=t.width,r.putImageData(t,0,0,0,0,t.width,t.height)};t.requestScreenshot(o,a)}}}function FitToWindowDirective(t,e){return{restrict:"C",priority:-1,link:function(n,o,i){function r(){var t,n,l,c=e.innerWidth/e.innerHeight;s?(l=o.find("IMG")[0],t=l&&l.height,n=l&&l.width):"VIDEO"===a.tagName?(t=a.videoHeight,n=a.videoWidth):"IMG"===a.tagName&&(t=a.height,n=a.width),t&&n&&(n/t>c?i.$addClass("fit-to-window-width-directive"):i.$removeClass("fit-to-window-width-directive"),s?o.find("IMG").off("load",r):o.off("load",r))}var a=o[0],s=i.ngBindHtml;s?n.$watch("ngBindHtml",function(){t(function(){o.find("IMG").on("load",r),r()},50)}):o.on("load",r),r(),angular.element(e).on("resize",_.debounce(r,150))}}}function VideoContainer(t){return{restrict:"A",link:function(e,n){function o(){var t;switch(a){case"html5":t=n.find("video")[0];break;case"vimeo":t=n.find("iframe")[0];break;case"youtube":t=n.find("iframe")[0]}return t}var i=n[0],r=(angular.element(i),e.slide),a="",s=!1;r.attributes.video?a="html5":r.annotation.content.indexOf("vimeo")>=0?a="vimeo":r.annotation.content.indexOf("youtube")>=0&&(a="youtube"),t.$on("videoEnter",function(t,e){e===r&&("html5"!==a||s||(o().play(),s=!0))}),t.$on("videoExit",function(t,e){if(e===r&&"html5"===a){var n=o();n.pause()}})}}}angular.module("shotbyshot",["ngAnimate","ngCookies","ngTouch","ngSanitize","ui.router"]).config(["$stateProvider","$urlRouterProvider","$locationProvider","$sceDelegateProvider",function(t,e,n,o){t.state("volume",{template:"<ui-view/>",url:"/volume/:volume","abstract":!0,controller:["$scope","$stateParams",function(t,e){t.volume=e.volume}]}).state("volume.shot",{url:"/:shot",templateUrl:"partials/shot.html",controller:"ShotCtrl",controllerAs:"shot"}),e.otherwise("/volume/01/01"),o.resourceUrlWhitelist(["self","https://worldrecordsjournal.org/wp/wp-content/uploads/**","https://s3.amazonaws.com/world-records-journal/**","https://s3.amazonaws.com/world-records-journal/","player.vimeo.com/video/**","http://cf.lossur.es/**","http://d16hdktz6rtx08.cloudfront.net/**"])}]),ShotCtrl.$inject=["$scope","$sce","$filter","$timeout","$state","$stateParams","ShotService","AnnotationParserService","ShotVideoService","ScrollService","AnalyticsService","AutoScrollerService"],angular.module("shotbyshot").controller("ShotCtrl",ShotCtrl),ShotService.$inject=["$rootScope","$http","$filter","$stateParams","$q","AnnotationsService"],angular.module("shotbyshot").service("ShotService",ShotService),AnnotationsService.$inject=["Annotation"],angular.module("shotbyshot").service("AnnotationsService",AnnotationsService),AnnotationParserService.$inject=["$sce","$rootScope","Annotation"],angular.module("shotbyshot").service("AnnotationParserService",AnnotationParserService),angular.module("shotbyshot").factory("Annotation",Annotation),angular.module("shotbyshot").service("StreetViewService",StreetViewService),VideoService.$inject=["ShotService"],angular.module("shotbyshot").service("VideoService",VideoService),angular.module("shotbyshot").service("ShotVideoService",ShotVideoService),ScrollService.$inject=["ShotVideoService","$stateParams"],angular.module("shotbyshot").service("ScrollService",ScrollService),angular.module("shotbyshot").service("AutoScrollerService",AutoScrollerService),AnalyticsService.$inject=["$window"],angular.module("shotbyshot").service("AnalyticsService",AnalyticsService),angular.module("shotbyshot").filter("shot",function(){return ShotFilter}),angular.module("shotbyshot").filter("mimetype",function(){return MimeTypeFilter}),angular.module("shotbyshot").filter("htmlToPlaintext",function(){return function(t){return t?String(t).replace(/<[^>]+>/gm,""):""}}),angular.module("shotbyshot").filter("webm",function(){return WebMFilter}),SlideManager.$inject=["$timeout","ScrollService"],angular.module("shotbyshot").directive("slideManager",SlideManager),angular.module("shotbyshot").directive("slide",Slide),BackgroundCoverDirective.$inject=["$timeout","$window"],angular.module("shotbyshot").directive("backgroundCoverDirective",BackgroundCoverDirective),shotVideoDirective.$inject=["VideoService","ShotVideoService"],angular.module("shotbyshot").directive("shotVideoDirective",shotVideoDirective),StreetView.$inject=["StreetViewService"],angular.module("shotbyshot").directive("streetView",StreetView),VideoFrame.$inject=["VideoService"],angular.module("shotbyshot").directive("videoFrame",VideoFrame),FitToWindowDirective.$inject=["$timeout","$window"],angular.module("shotbyshot").directive("fitToWindowDirective",FitToWindowDirective),VideoContainer.$inject=["$rootScope"],angular.module("shotbyshot").directive("videoContainer",VideoContainer),/*!
 * clipboard.js v1.7.1
 * https://zenorocha.github.io/clipboard.js
 *
 * Licensed MIT © Zeno Rocha
 */
function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Clipboard=t()}}(function(){var t;return function e(t,n,o){function i(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return i(n?n:e)},u,u.exports,e,t,n,o)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(t,e){function n(t,e){for(;t&&t.nodeType!==o;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}var o=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var i=Element.prototype;i.matches=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector}e.exports=n},{}],2:[function(t,e){function n(t,e,n,i,r){var a=o.apply(this,arguments);return t.addEventListener(n,a,r),{destroy:function(){t.removeEventListener(n,a,r)}}}function o(t,e,n,o){return function(n){n.delegateTarget=i(n.target,e),n.delegateTarget&&o.call(t,n)}}var i=t("./closest");e.exports=n},{"./closest":1}],3:[function(t,e,n){n.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},n.nodeList=function(t){var e=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===e||"[object HTMLCollection]"===e)&&"length"in t&&(0===t.length||n.node(t[0]))},n.string=function(t){return"string"==typeof t||t instanceof String},n.fn=function(t){var e=Object.prototype.toString.call(t);return"[object Function]"===e}},{}],4:[function(t,e){function n(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!a.string(e))throw new TypeError("Second argument must be a String");if(!a.fn(n))throw new TypeError("Third argument must be a Function");if(a.node(t))return o(t,e,n);if(a.nodeList(t))return i(t,e,n);if(a.string(t))return r(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function o(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}function i(t,e,n){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,n)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,n)})}}}function r(t,e,n){return s(document.body,t,e,n)}var a=t("./is"),s=t("delegate");e.exports=n},{"./is":3,delegate:2}],5:[function(t,e){function n(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var o=window.getSelection(),i=document.createRange();i.selectNodeContents(t),o.removeAllRanges(),o.addRange(i),e=o.toString()}return e}e.exports=n},{}],6:[function(t,e){function n(){}n.prototype={on:function(t,e,n){var o=this.e||(this.e={});return(o[t]||(o[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function o(){i.off(t,o),e.apply(n,arguments)}var i=this;return o._=e,this.on(t,o,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),o=0,i=n.length;for(o;i>o;o++)n[o].fn.apply(n[o].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),o=n[t],i=[];if(o&&e)for(var r=0,a=o.length;a>r;r++)o[r].fn!==e&&o[r].fn._!==e&&i.push(o[r]);return i.length?n[t]=i:delete n[t],this}},e.exports=n},{}],7:[function(e,n,o){!function(i,r){if("function"==typeof t&&t.amd)t(["module","select"],r);else if("undefined"!=typeof o)r(n,e("select"));else{var a={exports:{}};r(a,i.select),i.clipboardAction=a.exports}}(this,function(t,e){function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(e),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=function(){function t(e){o(this,t),this.resolveOptions(e),this.initSelection()}return a(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=i.default(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=i.default(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==("undefined"==typeof t?"undefined":r(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=s})},{select:5}],8:[function(e,n,o){!function(i,r){if("function"==typeof t&&t.amd)t(["module","./clipboard-action","tiny-emitter","good-listener"],r);else if("undefined"!=typeof o)r(n,e("./clipboard-action"),e("tiny-emitter"),e("good-listener"));else{var a={exports:{}};r(a,i.clipboardAction,i.tinyEmitter,i.goodListener),i.clipboard=a.exports}}(this,function(t,e,n,o){function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}var c=i(e),u=i(n),d=i(o),h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),p=function(t){function e(t,n){r(this,e);var o=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.resolveOptions(n),o.listenClick(t),o}return s(e,t),f(e,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===h(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=d.default(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new c.default({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return l("action",t)}},{key:"defaultTarget",value:function(t){var e=l("target",t);return e?document.querySelector(e):void 0}},{key:"defaultText",value:function(t){return l("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,n=!!document.queryCommandSupported;return e.forEach(function(t){n=n&&!!document.queryCommandSupported(t)}),n}}]),e}(u.default);t.exports=p})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)}),function(t){try{t=angular.module("shotbyshot")}catch(e){t=angular.module("shotbyshot",[])}t.run(["$templateCache",function(t){t.put("partials/nav.html",'<nav class="top-nav" ng-class="{menu: menuIsOn && !globalIsOn, global: globalIsOn}"><button class="top-nav-menu-button" ng-if="!menuIsOn" ng-click="toggleGlobalMenu()"></button> <button class="top-nav-menu-button" ng-if="menuIsOn && !globalIsOn" ng-click="toggleMenu()"></button><div class="top-nav-header" ng-show="shot.id" ng-click="toggleMenu()"><div ng-include="\'../images/WR_half_logo.svg\'" class="top-nav-logo"></div><div class="top-nav-breadcrumbs"><div class="top-nav-desktop"><div class="top-nav-shot-current">Volume {{ volume | number }} &nbsp; \\ &nbsp; Article {{ shot.id }} &nbsp; \\ &nbsp;</div><div class="top-nav-current-slide"><div class="top-nav-author down" ng-repeat="slide in shot.slides | filter:isHeaderSlide">{{ slide.nav || slide.annotation.author.name | htmlToPlaintext }}</div></div></div><div class="top-nav-mobile"><div class="top-nav-shot-current">{{ volume }} - {{ getArticleNumber(shot.id) }}</div></div></div><div class="top-nav-index-label">Volume Index & Article Detail <span class="down-chevron">^</span></div></div><div class="nav-menu"><div class="nav-menu-inner"><h4>Article Detail</h4><div class="nav-menu-details"><div class="nav-menu-appellation"><h1>{{ shot.annotations[0].title }}</h1><h3>{{ shot.annotations[0].author.name }}</h3><div class="nav-menu-utilities"><a href="{{ shot.annotations[0].pdf }}" target="_blank">PDF Download</a> <a href="javascript:void(0)" class="share-link">Share</a></div></div><div class="nav-menu-description"><p ng-bind-html="shot.annotations[0].author.description"></p></div></div><div class="nav-menu-controls"><div class="nav-menu-tabs"><a class="nav-menu-tab" ng-repeat="tab in [\'shots\', \'tags\']" ng-click="$parent.showMenuTab = tab; $parent.filterShots();" ng-bind="tab" ng-class="{on: showMenuTab === tab}"></a></div></div><div class="nav-menu-shots" ng-show="showMenuTab === \'shots\'"><h4>{{ currentVolume.title }}</h4><div class="nav-menu-scrollable"><a class="nav-menu-shot" ng-repeat="shot in shots | orderBy:\'slug\'" href="#/volume/{{volume}}/{{shot.index}}" ng-click="closeMenuIfCurrent(shot)"><div class="nav-menu-shot-thumb"><img ng-src="{{ thumbnailForShot( shot ) }}"></div><div class="nav-menu-shot-number">{{ shot.index | number }}</div><div class="nav-menu-shot-details"><p><strong>{{ shot.title }}</strong></p><p>{{ shot.annotations[0].author.name }}</p></div></a></div></div><div class="nav-volume-credits" ng-bind-html="currentVolume.description"></div><div class="nav-menu-tags" ng-show="showMenuTab === \'tags\'"><div class="nav-menu-scrollable"><a class="nav-menu-tag" ng-repeat="tag in shot.tags" ng-bind-html="tag.title" ng-click="$parent.filterShots(tag); $parent.showMenuTab = \'shots\';"></a></div></div></div></div><div class="nav-global"><div><a href="https://worldrecordsjournal.org" target="_blank">About</a></div><div><a href="https://worldrecordsjournal.org/volumes/" target="_blank">Volumes</a></div><div><a href="https://worldrecordsjournal.org/subscribe-to-world-records/" target="_blank">Subscribe</a></div><div><a href="https://worldrecordsjournal.org/join/" target="_blank">Newsletter Signup</a></div><div><a href="https://worldrecordsjournal.org/submissions/" target="_blank">Call for Submissions</a></div><div><a href="https://worldrecordsjournal.org/contact/" target="_blank">Contact</a></div><div class="copyright">© <strong>UnionDocs, Inc.</strong> 2018</div></div></nav><nav class="side-nav"><ul class="side-nav-circles"><li class="side-nav-circle" ng-repeat="slide in shot.slides | filter:isNavSlide" ng-click="scrollToSlide(slide)"><div class="side-nav-tag">{{ slide.nav || slide.annotation.author.name }}</div></li></ul></nav>')}])}(),function(t){try{t=angular.module("shotbyshot")}catch(e){t=angular.module("shotbyshot",[])}t.run(["$templateCache",function(t){t.put("partials/shot.html",'<div class="container"><div ng-class="{\'cinema\': shot.playing}" ng-include="\'partials/nav.html\'"></div><div class="content" ng-class="{\'shot-ready\': shot.ready, \'cinema\': shot.playing}"><div class="shot-background" ng-style="{\'opacity\': shot.backgroundOpacity}"></div><video class="shot-video-directive" crossorigin="" autoplay="" loop="" muted=""><source ng-src="{{ shot.videoUrl }}" type="video/mp4"><source ng-src="{{ shot.videoUrl | webm }}" type="video/webm">Your browser does not support the <code>video</code> element.</video><div class="shot-video-play" ng-show="shot.ready && inView && !shot.playing" ng-click="shot.play()"></div><div class="slides"><slide-manager slides="shot.slides"></slide-manager></div></div></div>')}])}();